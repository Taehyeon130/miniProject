<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
				  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- namespace
		현재.xml의 쿼리를 호출할 Mapper Class의 경로와 클래스 명으로 해야함
 -->

<mapper namespace = "com.project.blog.repository.BlogMapper">
	<!-- 등록하기 -->
	<insert id="insertBlog" parameterType="com.project.blog.domain.BlogDto">
		insert into blog (b_id,b_title, b_author, b_content, b_show, b_search, b_cate,b_date,delYn) values(#{b_id},#{b_title}, #{b_author}, #{b_content}, #{b_show}, #{b_search}, #{b_cate},now(),'N');
	</insert>

	<!-- 전체 select -->
	<select id="selectAllBlog" resultType="com.project.blog.domain.BlogDto">
		select b_id, b_title, b_author, b_content,b_show, b_search, b_cate,  b_date, b_modDate from blog
		where delYn ='N'
		order by b_id desc, b_date desc
	</select>

	<!-- 하나만 삭제 -->
	<update id="deleteOne" parameterType="int">
		update blog set delYn = "Y" where b_id=#{b_id}
	</update>


	<!-- 상세보기 -->
	<select id="selectById" resultType="com.project.blog.domain.BlogDto" parameterType="int">
		select b_id, b_title, b_author, b_content, b_show, b_search, b_cate , delYn,b_date from blog where b_id =#{b_id}
	</select>

	<!-- 수정하기 -->
	<update id="updateBlog"  parameterType="com.project.blog.domain.BlogDto">
		update blog set b_title=#{b_title},b_author=#{b_author},b_content=#{b_content},b_show=#{b_show},b_search=#{b_search},b_cate=#{b_cate},b_modDate=now() where b_id=#{b_id}
	</update>


</mapper>